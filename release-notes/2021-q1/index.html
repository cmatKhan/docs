
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.13">
    
    
      
        <title>Q1 - 2021 Changes - HTCF</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e411adfe.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="wustl_red" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#q1-2021-changes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="HTCF" class="md-header__button md-logo" aria-label="HTCF" data-md-component="logo">
      
  <img src="../../htcf_rev_sm.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HTCF
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Q1 - 2021 Changes
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="HTCF" class="md-nav__button md-logo" aria-label="HTCF" data-md-component="logo">
      
  <img src="../../htcf_rev_sm.png" alt="logo">

    </a>
    HTCF
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../using/getstarted/" class="md-nav__link">
        Your HTCF Account
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../policies/" class="md-nav__link">
        Policies
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../storage/" class="md-nav__link">
        Storage
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../software/" class="md-nav__link">
        Software
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="q1-2021-changes">Q1 - 2021 Changes</h1>
<p>The beginning of 2021 will see quite a few (pretty cool, we think) changes within the HTCF.  Much effort has been made to ease the transitions that are necessary to make these changes.  Please contact us with any questions or concerns.</p>
<h2 id="whats-changing">What's changing?</h2>
<p>There are essentially 4 changes (with more detail and schedule further down): </p>
<dl>
<dt><strong>OS Upgrade</strong></dt>
<dd>
<p>While the HTCF <em>backend</em> servers have been continually upgraded over the years, the cluster nodes and login server are long overdue for an OS upgrade.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Many of the current software modules rely on system libraries.  These libraries will be upgraded when the OS is upgraded.</p>
<p>It it likely that some software packages will have errors due to the change in system libraries.  Don't worry though, we've got a solution for that.... <img alt="👇" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f447.svg" title=":point_down:" /></p>
</div>
</dd>
<dt><strong>Self-Service Software</strong> <img alt="🚐" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f690.svg" title=":minibus:" /></dt>
<dd>
<p>As the HTCF user base grows, so do the software installation needs.  Maintaining the software and modules for all labs can leave a web of dependency, version, and architecture conflicts that are difficult to untangle.  The most sensible, sustainable, and flexible approach going forward is for HTCF support to move over to the passenger seat and leave the driving to the labs.  Labs should now feel empowered to install and manage their own software (with us in the passenger seat to help navigate).</p>
<p>Infrastructure is in place to ease in this, including an <strong>initial 1TB of space per lab</strong> for software storage called /ref.  Speaking of which.... <img alt="👇" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f447.svg" title=":point_down:" /></p>
</dd>
<dt><strong>/ref</strong></dt>
<dd>A new form of LTS storage called /ref will be introduced.  /ref is storage space for software and reference databases (think NCBI databases or software-provided reference sequences).  Each lab will be given an initial 1TB of reference space, this space can be expanded at LTS prices.  Speaking of new forms of LTS.... <img alt="👇" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f447.svg" title=":point_down:" /></dd>
<dt><strong>LTOS</strong> <img alt="☁" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/2601.svg" title=":cloud:" /></dt>
<dd>
<p><strong>Object Storage LTS</strong> as been quietly available for a while, but now it's official.  This is the <em>cloud storage</em> form of local LTS (<em>local</em> meaning high speed and hosted within the HTCF) that uses the <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/Welcome.html">Amazon S3 API</a> for access.  It's well suited for large amounts of data that don't change much (e.g. raw sequencing runs).</p>
<p><strong>Unlike traditional LTS</strong>:</p>
<ul>
<li>LTOS buckets don't have a size limit</li>
<li>They're available from each node <ul>
<li>no more login server copying back and forth!</li>
<li>Aggregate transfer rates can be much faster than traditional /lts.</li>
</ul>
</li>
<li>Before you get too excited, there's a learning curve...because it's more like cloud storage, you won't find it in a traditional filesystem directory.  So <code>cp</code>, <code>mv</code>, and <code>rsync</code> will not help you. With the right use case though, we're confident that the learning curve will be well worth it!</li>
</ul>
</dd>
</dl>
<h3 id="os-upgrade">OS Upgrade</h3>
<p>All nodes (including the login server) will be upgraded from Ubuntu 16.04 to Ubuntu 20.04.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Many of the current software modules rely on system libraries.  These libraries will be upgraded when the OS is upgraded.</p>
<p>It it likely that some software packages will have errors due to the change in system libraries.</p>
</div>
<table>
<thead>
<tr>
<th>Date</th>
<th>Change</th>
<th>% nodes containing upgraded OS</th>
</tr>
</thead>
<tbody>
<tr>
<td>Jan 11</td>
<td>New slurm partition <strong><code>beta</code></strong> will be made available for trying out jobs on a small number of nodes that use the upgraded OS. <br/> To use, add: <code>#SBATCH -p beta</code> to your sbatch files</td>
<td>5%</td>
</tr>
<tr>
<td>Jan 18</td>
<td>Login Server will be upgraded to new OS</td>
<td>5%</td>
</tr>
<tr>
<td>Jan 18 - 25</td>
<td>Rolling OS upgrades of idle nodes (up to 50% of nodes) will continue.</td>
<td>5% - 50%</td>
</tr>
<tr>
<td>Feb 1</td>
<td>Slurm partition <strong><code>general</code></strong> will be renamed <strong><code>legacy</code></strong> and <strong><code>beta</code></strong> will be renamed to <strong><code>general</code></strong>.</td>
<td>50%</td>
</tr>
<tr>
<td>Feb 1</td>
<td>Slurm partition <strong><code>general</code></strong> will become the default interactive and batch job partition.</td>
<td>50%</td>
</tr>
<tr>
<td>Feb 1 - 15</td>
<td>Rolling OS upgrades of idle nodes (up to 95% of nodes) will continue.</td>
<td>50% - 95%</td>
</tr>
<tr>
<td>Mar 8</td>
<td>All nodes upgraded</td>
<td><img alt="💯" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f4af.svg" title=":100:" /></td>
</tr>
</tbody>
</table>
<h3 id="self-service-software-and-modules">Self-service software and modules</h3>
<p>The system-wide software and modules in directories <code>/opt/apps</code> and <code>/opt/htcf</code> will be frozen (read-only) and use of software in these directories is <strong>deprecated.</strong></p>
<p>Replacing these directories will be a form of LTS call /ref, lab reference space located in <code>/ref/&lt;lab&gt;/software</code> and <code>/ref/&lt;lab&gt;/modulefiles</code>.  Each lab will receive 1TB of space in /ref for storage of reference material including software and reference sequence databases.  <a href="storage/ref.md">More information about /ref can be found here.</a></p>
<p>Software installation will now be self-service.  To aid in this, <a href="software_new.md">documentation has been added</a> and infrastructue is in place for lab-managed <a href="software_new.md#spack">spack installations</a>.  Thousands of packages are available for installation using <a href="https://spack.readthedocs.io/">spack</a>.</p>
<div class="admonition help">
<p class="admonition-title">Help</p>
<p>We are here to help with the migration from the deprecated modules system to your labs' new /ref software.  Rest assured that the deprecated software will not be removed until migration is complete.</p>
</div>
<table>
<thead>
<tr>
<th>Date</th>
<th>Change</th>
</tr>
</thead>
<tbody>
<tr>
<td>Jan 11</td>
<td>Each lab given 1TB of /ref space which will be <a href="#cluster-wide-operating-system-upgrade"><strong>availabe on all OS-upgraded nodes</strong></a>.  <br /> To begin testing: <br/> <code>srun --mem=X000 -c X -p beta --pty /bin/bash -l</code></td>
</tr>
<tr>
<td>Jan 18</td>
<td>/opt/apps and /opt/htcf will go read-only to encourage use of /ref</td>
</tr>
<tr>
<td>Jan 25</td>
<td>modules loaded from /opt/apps and /opt/htcf will contain a Deprecation Warning to encourage use of /ref</td>
</tr>
<tr>
<td>Mar 1 - 8</td>
<td>modules for software in /opt/apps and /opt/htcf will be incrementally removed</td>
</tr>
<tr>
<td>Mar 8</td>
<td>/opt/apps and /opt/htcf directories will be decommissioned.</td>
</tr>
</tbody>
</table>
<h3 id="ref">/ref</h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Keep in mind, while /ref is a form of LTS, it <strong>is not /lts</strong> (e.g. it isn't backed up)</p>
</div>
<table>
<thead>
<tr>
<th>Date</th>
<th>Change</th>
</tr>
</thead>
<tbody>
<tr>
<td>Jan 11</td>
<td>Each lab given 1TB of /ref space which will be <a href="#cluster-wide-operating-system-upgrade"><strong>availabe on all OS-upgraded nodes</strong></a> to begin testing: <br/> <code>srun --mem=X000 -c X -p beta --pty /bin/bash -l</code></td>
</tr>
<tr>
<td>Feb 1</td>
<td>The <code>/scratch/ref</code> data directory will be renamed <code>/scratch/old-ref</code> to encourage use of <code>/ref/&lt;lab&gt;/data/</code> instead.</td>
</tr>
<tr>
<td>Mar 8</td>
<td><code>/scratch/old-ref</code> directory will be decommissioned.</td>
</tr>
</tbody>
</table>
<h3 id="ltos">LTOS</h3>
<table>
<thead>
<tr>
<th>Date</th>
<th>Change</th>
</tr>
</thead>
<tbody>
<tr>
<td>Jan 11</td>
<td>LTOS open for business</td>
</tr>
<tr>
<td>Feb 1</td>
<td>Labs with traditional /lts buckets &gt;= 15TB will be encouraged to consider LTOS for some of their bulky data (such as raw sequence data)</td>
</tr>
</tbody>
</table>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.sections", "toc.integrate"], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ed9748b7.min.js"></script>
      
    
  </body>
</html>