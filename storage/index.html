
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.13">
    
    
      
        <title>Storage - HTCF</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.e411adfe.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="wustl_red" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#storage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="HTCF" class="md-header__button md-logo" aria-label="HTCF" data-md-component="logo">
      
  <img src="../htcf_rev_sm.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HTCF
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Storage
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="HTCF" class="md-nav__button md-logo" aria-label="HTCF" data-md-component="logo">
      
  <img src="../htcf_rev_sm.png" alt="logo">

    </a>
    HTCF
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../using/getstarted/" class="md-nav__link">
        Your HTCF Account
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../policies/" class="md-nav__link">
        Policies
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Storage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Storage
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hds" class="md-nav__link">
    HDS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lts" class="md-nav__link">
    LTS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ltos" class="md-nav__link">
    LTOS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ref" class="md-nav__link">
    REF
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hts" class="md-nav__link">
    HTS
  </a>
  
    <nav class="md-nav" aria-label="HTS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quota-increase-requests" class="md-nav__link">
    Quota Increase Requests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recommendations" class="md-nav__link">
    Recommendations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sharing-files-publicly" class="md-nav__link">
    Sharing Files Publicly
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copying-files-using-rsync" class="md-nav__link">
    Copying Files Using Rsync
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disk-quota-exceeded-errors" class="md-nav__link">
    Disk Quota Exceeded Errors
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="compare/" class="md-nav__link">
        Storage Comparison
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../software/" class="md-nav__link">
        Software
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="storage">Storage</h1>
<p>The HTCF provides five types of storage:</p>
<h3 id="hds">HDS</h3>
<p>Home Directory Storage (HDS) can be used to store scripts, development tools, etc.  Home directories are located in <code>/home/&lt;WUSTLKEY_ID&gt;</code> and are available on all nodes.</p>
<p>HDS is kept on fault-tolerant storage and frequent snapshops are taken to prevent accidental data loss.  Copies of the latest daily snapshots are kept offsite for disaster recovery purposes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Home directory space is not a high-speed resource like /scratch space.</p>
<p>Please keep home directory access to a minimum in batch jobs.</p>
</div>
<p>By default, home directories will not be readable or writeable by other users of HTCF.  Feel free to change this default, if desired.</p>
<p>To check home directory usage:</p>
<div class="highlight"><pre><span></span><code>$ du -sh $HOME
</code></pre></div>
<h3 id="lts">LTS</h3>
<p>Long Term Storage (LTS) is lab project space to store raw sequencing and completed data, the directories are not available on nodes for computational use.  It is available in terabyte increments billed monthly.  It is kept on fault-tolerant storage with snapshops.  Copies of the latest daily snapshots are kept offsite for disaster recovery purposes. </p>
<p>To check LTS usage:</p>
<div class="highlight"><pre><span></span><code>$ df -h /lts/&lt;lab_name&gt;/&lt;bucket_name&gt;
</code></pre></div>
<h3 id="ltos">LTOS</h3>
<p><em>Coming Soon</em></p>
<h3 id="ref">REF</h3>
<p><code>/ref</code> is storage space for software and reference databases (such as NCBI databases or software-provided reference sequences).  Each lab has an initial 1TB of reference space, and this space can be expanded at LTS prices.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>/ref</code> is not currently backed up, therefore <strong>Any data in <code>/ref</code> that cannot be recreated should be copied to long term storage (LTS) for safe-keeping.</strong></p>
</div>
<div class="highlight"><pre><span></span><code>/ref
├── &lt;lab&gt;
    ├── data
    └── software
</code></pre></div>
<p>The <code>data</code> directory is well suited for modestly sized reference data such as <a href="ftp://ftp.ncbi.nlm.nih.gov/blast/db/">NCBI blast databases</a>.
Larger datasets (&gt; 500GB) are probably better suited for <a href="#ltos">Long Term Object Storage</a></p>
<p>The <code>software</code> directory is suited for software installation using tools such as <a href="../software/#spack">spack</a></p>
<h3 id="hts">HTS</h3>
<p>High Throughput Storage (<code>/scratch</code>) is a distrubuted file system able to handle tens of GBs/sec of total throughput.  This storage is <em>temporary scratch space</em> and is <strong>not</strong> backed up.  Once data is removed from /scratch, it cannot be recovered.</p>
<p><em>Data stored in /scratch is subject to the <a href="../policies/#scratch-data-cleaning">Scratch Data Cleaning Policy</a>.</em></p>
<p>Jobs utilize this space for inputs and outputs to provide the best performance possible.  Running jobs that read/write from the home directory will cause slowness and login issues for all users.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Users will be asked to clean up older files on /scratch if it is needed to improve system performance.</p>
</div>
<p>The best use of the HTS is to use a workflow similar to the following:</p>
<ol>
<li>Copy starting (raw) data from LTS to HTS.</li>
<li>Submit jobs to the cluster that process the data, creating intermediate and/or finished data.</li>
<li>Copy the finished data (and job files used to create that data) over to LTS.</li>
<li>Remove all working data from HTS</li>
</ol>
<p>Results that are generated on this storage need to be promptly copied to LTS. </p>
<p>There is a quota of 2TB per user in /scratch to prevent the filesystem from filling up.  At &gt;85% /scratch can become very slow.  To check the amount of space being used, use the following command:</p>
<div class="highlight"><pre><span></span><code>$ beegfs-ctl --getquota --uid $USER
</code></pre></div>
<h4 id="quota-increase-requests">Quota Increase Requests</h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A quota increase is not garaunteed.  If excess capacity is not available, a quota increase cannot be granted.</p>
</div>
<p>If excess capacity is available.  A temporary increase in the scratch quota can be requested.  To request more scratch space, email following information:</p>
<ol>
<li>Reason for the increase</li>
<li>Amount of additional space</li>
<li>Duration additional space will be required</li>
</ol>
<h4 id="recommendations">Recommendations</h4>
<ul>
<li>No important source code, scripts, libraries, executables should be kept in <code>/scratch</code></li>
<li>Do not make symlinks from the home directory to folders in <code>/scratch</code></li>
</ul>
<h3 id="sharing-files-publicly">Sharing Files Publicly</h3>
<p>Globus can be used to share data from LTS or Home directories.  The Globus "Collection" is called "HTCF Home Directories". Please see <a href="https://docs.globus.org/how-to/get-started/">the globus documentation for more information</a></p>
<p>For long term hosting of publicly accessible data, please contact WUSTL IT.</p>
<h3 id="copying-files-using-rsync">Copying Files Using Rsync</h3>
<p>Using rsync to transfer to scratch and LTS is recommended.  Rsync can resume failed copies, be re-run to ensure all of the data has been transferred, and will also transfer incremental changes.  This will save a substantial amount of time if it is necessary to verify that all files have been successfully copied.</p>
<p>When using this command, please note that the absense of a trailing slash means the directory, with a trailing slash means the contents of that directory.  Here are a few examples:
<a href="https://stackoverflow.com/questions/31278098/slashes-and-the-rsync-command">More info...</a></p>
<h3 id="disk-quota-exceeded-errors">Disk Quota Exceeded Errors</h3>
<p>If a <code>disk quota exceeded</code> error messages is encountered, please check each storage location to ensure there is enough disk space available.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../policies/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Policies" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Policies
            </div>
          </div>
        </a>
      
      
        
        <a href="compare/" class="md-footer__link md-footer__link--next" aria-label="Next: Storage Comparison" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Storage Comparison
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.sections", "toc.integrate"], "search": "../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ed9748b7.min.js"></script>
      
    
  </body>
</html>