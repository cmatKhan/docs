
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.7">
    
    
      
        <title>Storage - HTCF</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.19753c6b.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.196e0c26.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#storage-at-the-htcf" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="HTCF" class="md-header-nav__button md-logo" aria-label="HTCF">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            HTCF
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Storage
            
          </span>
        </div>
      
    </div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          

<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="HTCF" class="md-nav__button md-logo" aria-label="HTCF">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    HTCF
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../getstarted/" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../policies/" class="md-nav__link">
      Policies
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Storage
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Storage
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hds-home-directory-storage-home" class="md-nav__link">
    HDS: Home Directory Storage (/home)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lts-long-term-storage-lts" class="md-nav__link">
    LTS: Long Term Storage (/lts)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hts-high-throughput-storage-scratch" class="md-nav__link">
    HTS: High Throughput Storage (/scratch)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quota-increase-requests" class="md-nav__link">
    Quota Increase Requests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recommendations" class="md-nav__link">
    Recommendations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publishing-files" class="md-nav__link">
    Publishing Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copying-files-using-rsync" class="md-nav__link">
    Copying Files Using Rsync
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disk-quota-exceeded-errors" class="md-nav__link">
    Disk Quota Exceeded Errors
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../software/" class="md-nav__link">
      Software
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../support/" class="md-nav__link">
      Support
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hds-home-directory-storage-home" class="md-nav__link">
    HDS: Home Directory Storage (/home)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lts-long-term-storage-lts" class="md-nav__link">
    LTS: Long Term Storage (/lts)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hts-high-throughput-storage-scratch" class="md-nav__link">
    HTS: High Throughput Storage (/scratch)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quota-increase-requests" class="md-nav__link">
    Quota Increase Requests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recommendations" class="md-nav__link">
    Recommendations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publishing-files" class="md-nav__link">
    Publishing Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copying-files-using-rsync" class="md-nav__link">
    Copying Files Using Rsync
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disk-quota-exceeded-errors" class="md-nav__link">
    Disk Quota Exceeded Errors
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="storage-at-the-htcf">Storage at the HTCF</h1>
<p>The HTCF provides three types of storage:</p>
<h3 id="hds-home-directory-storage-home">HDS: Home Directory Storage (/home)</h3>
<p>Home directories are a small, fixed amount of storage per account.  They are kept on fault-tolerant storage and frequent snapshops are taken to prevent accidental data loss.  Copies of the latest daily snapshots are kept offsite for disaster recovery purposes.</p>
<p>Each HTCF user account has 20GB home directory.  This directory can be used to store scripts, development tools, etc.  Home directories are located in "/home/<strong>WUSTL_KEY_ID</strong>" and are available on all nodes.</p>
<p><em>Please keep your home directory access to a minimum in your jobs.</em></p>
<p>By default, home directories will not be readable or writeable by other users of HTCF.  If you wish to change this default, you can use the chmod command to give the appropriate level of access to your lab members or other collaborative users.</p>
<p>You can check the amount of home directory with the <code>du</code> command.  It may take a few moments for the command to complete.  For example:</p>
<div class="highlight"><pre><span></span><code>~$ du -csh $HOME
10G /home/&lt;username&gt;
10G total
</code></pre></div>
<hr />
<h3 id="lts-long-term-storage-lts">LTS: Long Term Storage (/lts)</h3>
<p>Long term storage is lab project space to store raw sequencing and completed data, the directories are not available on nodes for computational use.  It is available in terabyte increments billed yearly.  It is kept on fault-tolerant storage with snapshops.  Copies of the latest daily snapshots are kept offsite for disaster recovery purposes.  To see how much space your lab is using, use the example command below, replace lab with your labname.  </p>
<div class="highlight"><pre><span></span><code>~$ df -h $( grep -v &#39;^#&#39; /etc/fstab | awk &#39;{ print $2 }&#39; | grep &#39;/lts/mylab&#39; )
Filesystem                                   Size  Used Avail Use% Mounted on
/dev/mylab/seq                           1.0T  165G  860G  17% /lts/lab/seq
/dev/mylab/data1                          10T  6.4T  3.7T  64% /lts/lab/data1
/dev/mylab/data2                          15T   14T  1.1T  93% /lts/lab/data2
</code></pre></div>
<hr />
<h3 id="hts-high-throughput-storage-scratch">HTS: High Throughput Storage (/scratch)</h3>
<p>HTCF high throughput storage is over 700TB, BeeGFS distrubuted file system able to handle more than 19GB/second of total throughput.  This storage is <em>temporary scratch space</em> and is <strong>not</strong> backed up.  We absolutely <strong>cannot</strong> recover anything in /scratch once removed.</p>
<p>*Data stored in /scratch is subject to the <a href="https://htcf.wustl.edu/docs/policies/#scratch-data-cleaning">Scratch Data Cleaning Policy</a>.</p>
<p>Jobs must utilize this space for inputs and outputs to provide the best performance possible.  Running jobs that read/write from your home directory will cause slowness and login issues for all users.</p>
<p>We will ask users to clean up older files on /scratch if it is needed to improve system performance.</p>
<p>The best use of the HTS is to follow a workflow similar to this:</p>
<ol>
<li>Copy your starting (raw) data from LTS over to HTS.</li>
<li>Submit jobs to the cluster that process your data, creating intermediate or final data.</li>
<li>Copy your final data (and job files used to create that data) over to LTS.</li>
<li>Remove all working data from HTS</li>
</ol>
<p>Results that are generated on this storage need to be promptly copied to LTS. </p>
<p>We have a general quota of 2TB per user in /scratch to prevent the filesystem from filling up.  At ~95% /scratch becomes very slow, at 100%, all operations on the cluster stop.  To check the amount of space you're using in /scratch, you can use the command below as an example, replace the support username with your username.</p>
<div class="highlight"><pre><span></span><code>~$ beegfs-ctl --getquota --uid support
      user/group     ||           size          ||    chunk files
     name     |  id  ||    used    |    hard    ||  used   |  hard
--------------|------||------------|------------||---------|---------
       support|  1000|| 325.48 GiB |   2.00 TiB ||        0|        0
</code></pre></div>
<h3 id="quota-increase-requests">Quota Increase Requests</h3>
<p>To temporarily increase your scratch quota, please email with the following information:</p>
<ol>
<li>Reason for the increase</li>
<li>Amount of additional space</li>
<li>Duration additional space will be required</li>
</ol>
<h3 id="recommendations">Recommendations</h3>
<ul>
<li>No important source code, scripts, libraries, executables should be kept in /scratch</li>
<li>Do not make symlinks from your home directory to folders in /scratch</li>
<li>Work with large files before breaking up into smaller files</li>
</ul>
<h3 id="publishing-files">Publishing Files</h3>
<p>To temporarily generate a URL for a collaborator to download files, you can use the following commands.  If there are any errors, please ensure the directory and file permissions on the files you wish to share allow all users read access.  The URL will be valid for 90 days, if a shorter duration is required please contact us.</p>
<p>To share a directory:
<div class="highlight"><pre><span></span><code>~$ module load htcf
~$ serve /path/to/directory
</code></pre></div>
To share a specific file:
<div class="highlight"><pre><span></span><code>~$ module load htcf
~$ serve /path/to/file
</code></pre></div></p>
<p>For long term hosting of publicly accessible data, please contact your department IT.</p>
<h3 id="copying-files-using-rsync">Copying Files Using Rsync</h3>
<p>Using rsync to transfer to scratch and LTS is recommended.  Rsync can resume failed copies, be re-run to ensure all of the data has been transferred, and will also transfer incremental changes.  This will save a substantial amount of time if you need to verify that all files have been successfully copied.</p>
<p>When using this command, please note that the absense of a trailing slash means the directory, with a trailing slash means the contents of that directory.  Here are a few examples:</p>
<div class="highlight"><pre><span></span><code>~$ rsync -aHv --progress /directory/to/transfer /destination/directory/location/
</code></pre></div>
<p>The above example would put the directory named "transfer" into the directory named "location"</p>
<div class="highlight"><pre><span></span><code>~$ rsync -aHv --progress /directory/to/transfer/ /destination/directory/location/
</code></pre></div>
<p>The above example would put the contents of the directory named "transfer" into the directory named "location".</p>
<h3 id="disk-quota-exceeded-errors">Disk Quota Exceeded Errors</h3>
<p>If you receive <code>disk quota exceeded</code> messages, please check each storage location to ensure you have enough disk space available.  Examples of the <code>du</code>, <code>df</code>, and <code>beegfs-ctl</code> commands to view utilization are provided for each storage type above. </p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../policies/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Policies
              </div>
            </div>
          </a>
        
        
          <a href="../software/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Software
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.0ac82a11.min.js"></script>
      <script src="../assets/javascripts/bundle.f81dfb4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ['navigation.instant', 'navigation.tabs', 'navigation.tabs.sticky'],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>