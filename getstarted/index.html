<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>Getting Started - High Throughput Computing Facility @ CGSSB</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="generator" content="mkdocs-1.3.0, mkdocs-gitbook-1.0.7">

<link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon">
<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta rel="next" href="" />
<link href="../css/style.min.css" rel="stylesheet">
<link href="../stylesheets/extra.css" rel="stylesheet"> 
</head>

<body>
<div class="book">
<div class="book-summary">
<div id="book-search-input" role="search">
<input type="text" placeholder="Type to search" />
</div> <!-- end of book-search-input -->

<nav role="navigation">
<ul class="summary">
<li>
<a href=".." target="_blank" class="custom-link">High Throughput Computing Facility @ CGSSB</a>
</li>
<li class="divider"></li>
<li class="chapter" data-path="">
<a href="..">The HTCF</a>
<li class="header">Doing Work</li>

<li>
<a href="./" class="active">Getting Started</a>
</li>

<li>
<a href="../runningjobs/" class="">Running Jobs</a>
</li>

<li>
<a href="../using/queue/" class="">The Queue</a>
</li>

<li>
<a href="../using/" class="">Using the HTCF</a>
</li>

<li>
<a href="../using/batch/" class="">Batch Jobs</a>
</li>

<li>
<a href="../using/interactive/" class="">Interactive Jobs</a>
</li>

<li>
<a href="../using/accounting/" class="">Job Accounting</a>
</li>

<li class="chapter" data-path="policies/">
<a href="../policies/">Policies</a>
<li class="header">Storage</li>

<li>
<a href="../storage/" class="">Overview</a>
</li>

<li>
<a href="../storage/hts/" class="">HTS</a>
</li>

<li>
<a href="../storage/ref/" class="">REF</a>
</li>

<li>
<a href="../storage/lts/" class="">LTS</a>
</li>

<li>
<a href="../storage/ltos/" class="">LTOS</a>
</li>

<li>
<a href="../storage/new_index.md" class="">Beta</a>
</li>

<li class="chapter" data-path="software/">
<a href="../software/">Software</a>
<li class="divider"></li>



<li><a href="http://www.mkdocs.org">
Published with MkDocs
</a></li>

<li><a href="https://github.com/GitbookIO/theme-default">
Theme by GitBook
</a></li>
</ul>

</nav>

</div> <!-- end of book-summary -->

<div class="book-body">
<div class="body-inner">
<div class="book-header" role="navigation">

<!-- Title -->
<h1>
<i class="fa fa-circle-o-notch fa-spin"></i>
<a href="." ></a>
</h1>

</div> <!-- end of book-header -->

<div class="page-wrapper" tabindex="-1" role="main">
<div class="page-inner">
<div id="book-search-results">
<div class="search-noresults">

<section class="normal markdown-section">



<h2 id="your-htcf-account">Your HTCF Account</h2>
<h3 id="account-creation">Account Creation</h3>
<p>To request a user account on the HTCF, please send an email with your request, along with your WUSTLKey username and your department ID (for billing purposes).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As stated in the <a href="../policies/#account-usage">WUSTL and HTCF Policies</a>, <strong>accounts and passwords cannot be shared. All users must have their own account.</strong></p>
</div>
<h3 id="logging-in">Logging In</h3>
<p>Your <strong>WUSTLKey credentials</strong> are used for authentication (<a href="http://wustlkey.wustl.edu">http://wustlkey.wustl.edu/</a>)</p>
<p>The login server, <code>login.htcf.wustl.edu</code> is accessible via ssh.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As stated in the <a href="../policies/#account-usage">WUSTL and HTCF Policies</a>, <strong>accounts and passwords cannot be shared. All users must have their own account.</strong></p>
</div>
<h3 id="using-your-account">Using your account</h3>
<p>Before using the HTCF, it's important to familiarize yourself with:</p>
<ol>
<li>
<p>The <a href="../storage/">HTCF Storage</a> including <a href="../storage/home/">home directories</a>, <a href="../storage/lts/">long term storage</a>, and <a href="../storage/ref/">reference storage</a></p>
</li>
<li>
<p>Using <a href="../software/">software</a> on the HTCF</p>
</li>
<li>
<p>The Slurm Workload Manager <a href="queue.md">queue</a> and <a href="../runningjobs/">running jobs</a></p>
</li>
</ol>
<h3 id="data-data-storage">Data &amp; Data Storage</h3>
<hr />
<h4 id="home-directories">Home Directories</h4>
<p>Each HTCF user account has 20GB home directory. This directory can be used to store scripts, development tools, etc. Home directories are located in "/home/WUSTL_KEY_ID" and are available on all nodes. They are kept on fault-tolerant storage and frequent snapshops are taken to prevent accidental data loss. Copies of the latest daily snapshots are kept offsite for disaster recovery purposes.</p>
<h4 id="long-term-storage">Long Term Storage</h4>
<p>LTS is used to store raw and "finished" project data.  The LTS directories are not available on the cluster nodes.  Long term storage is lab project space, available in terabyte increments. It is kept on fault-tolerant storage with snapshops. Copies of the latest daily snapshots are kept offsite for disaster recovery purposes.</p>
<h4 id="high-throughput-storage">High Throughput Storage</h4>
<p>HTCF high throughput storage is a large, distrubuted file system able to handle more than 6GB/second of total throughput. The HTS is scratch space and is not backed up. High thoughput storage is temporary. We absolutely cannot recover anything in /scratch once removed.</p>
<p>*Data stored in /scratch is subject to the <a href="https://htcf.wustl.edu/docs/policies/#scratch-data-cleaning">Scratch Data Cleaning Policy</a>.</p>
<p><em>More information is available on our <a href="/storage/index.md">Data &amp; Data Storage Page</a></em></p>
<h3 id="software">Software</h3>
<p>List the software available on HTCF
<div class="highlight"><pre><span></span><code>module avail
</code></pre></div></p>
<p>To load the software:
<div class="highlight"><pre><span></span><code>module load bowtie2
</code></pre></div></p>
<p>To request additional software modules, please contact us.</p>
<p><em>More information is available on our <a href="../software/">Software Page</a></em></p>
<h4 id="gui-software">GUI Software</h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As the HTCF is primarily a batch queuing system for high-throughput processing of data, use of GUI applications are not directly supported.  While use of GUI applications is possible using X forwarding, this can sometimes require significant desktop preparation and configuration which is beyond the scope of support.</p>
</div>
<h3 id="workflow">Workflow</h3>
<p>Jobs typically follow a generic workflow.</p>
<ul>
<li>A - Preprocessed Raw Data Enters LTS</li>
<li>B - Raw Data is copied to scratch for processing</li>
<li>C - Post processed data is copied to LTS</li>
<li>D - Intermediate data generated in Step B is removed</li>
</ul>
<h3 id="partitions">Partitions</h3>
<table>
<thead>
<tr>
<th align="left">Partition</th>
<th align="center">Max Memory</th>
<th align="center">Duration</th>
<th align="center">Max CPUs in Queue</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">debug</td>
<td align="center">250GB</td>
<td align="center">no limit</td>
<td align="center">3004</td>
</tr>
<tr>
<td align="left">interactive</td>
<td align="center">250GB</td>
<td align="center">8 hours</td>
<td align="center">3004</td>
</tr>
</tbody>
</table>
<h3 id="jobs">Jobs</h3>
<hr />
<h4 id="interactive">Interactive</h4>
<p>Interactive sessions are for running interactive scripts, vizualization, any tasks that are too computational intensive to run on the login node not submitted via sbatch.  The defaults are: 1 CPU core, 1 GB RAM, and a time limit of 8 hours.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The HTCF is primarily a batch queuing system.</p>
<p>Interactive jobs are meant to function as daily workspaces.
Because interactive jobs are by their nature, inefficient, they are not meant to be running continuously for more than 1 day.</p>
<p>When using interactive tools such as rstudio or jupyter, please make sure the jobs are using the "interactive" queue  (using sbatch/srun parameters <code>-J interactive -p interactive</code>)</p>
<p><strong>Jobs using interactive tools that are not in the interactive queue will be subject to cancellation in order to free up resources for batch jobs.</strong></p>
<p>Tools such as Rscript can be used to run R programs in a batch fashion.
It appears that jupyter notebooks can also be run in a <a href="http://tritemio.github.io/smbits/2016/01/02/execute-notebooks/">batch fashion</a>.</p>
<p>Thanks for helping to ensure fairness for all folks on the HTCF.</p>
</div>
<p>You can create an interactive session by running:</p>
<div class="highlight"><pre><span></span><code>~$ srun --mem=&lt;MBs&gt; --cpus-per-task=&lt;num&gt; -J interactive -p interactive --pty /bin/bash -l
</code></pre></div>
<h4 id="batch-job-submission">Batch Job Submission</h4>
<ul>
<li>Determine resources</li>
<li>Create Job File</li>
<li>Create sbatch file with required resources</li>
<li>Submit</li>
<li>Monitor</li>
</ul>
<h3 id="sbatch-examples">Sbatch Examples</h3>
<p>Create a job script (myjob.sbatch):
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --cpus-per-task=1</span>
<span class="c1">#SBATCH --mem=1G</span>

ml program

program /scratch/lab/files/ABC.fasta /scratch/lab/files/ABC.out
</code></pre></div></p>
<p>Submit the sbatch script.</p>
<div class="highlight"><pre><span></span><code>sbatch myjob.sbatch
</code></pre></div>
<p>View the job in the queue</p>
<div class="highlight"><pre><span></span><code>user@htcf:~$ squeue

JOBID PARTITION NAME USER ST TIME NODES NODELIST(REASON)
106  debug  example  example R   0:13   1    n067
</code></pre></div>
<h3 id="gpus">GPUs</h3>
<p>The HTCF currently has a small number of NVIDIA Tesla V100 GPUs.</p>
<p>A GPU is accessible using the following slurm parameters:</p>
<div class="highlight"><pre><span></span><code>#SBATCH -p gpu
#SBATCH --gres=gpu
</code></pre></div>


</section>
</div> <!-- end of search-noresults -->
<div class="search-results">
<div class="has-results">

<h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
<ul class="search-results-list"></ul>

</div> <!-- end of has-results -->
<div class="no-results">

<h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>

</div> <!-- end of no-results -->
</div> <!-- end of search-results -->
</div> <!-- end of book-search-results -->

</div> <!-- end of page-inner -->
</div> <!-- end of page-wrapper -->

</div> <!-- end of body-inner -->

</div> <!-- end of book-body -->
<script src="../js/main.js"></script>
<script src="../search/main.js"></script>
<script src="../js/gitbook.min.js"></script>
<script src="../js/theme.min.js"></script>
</body>
</html>